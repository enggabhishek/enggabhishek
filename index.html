<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DAG with Logos</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        .node {
            cursor: pointer;
        }

        .link {
            fill: none;
            stroke: #666;
            stroke-width: 2px;
        }

        .logo {
            width: 40px;
            height: 40px;
        }
    </style>
</head>
<body>

<svg width="600" height="400"></svg>

<script>
    // Set up SVG canvas dimensions
    const width = 600;
    const height = 400;

    // Sample data for nodes and links
    const nodes = [
        { id: 'Python', img: 'https://www.python.org/static/community_logos/python-logo.png' },
        { id: 'Git', img: 'https://git-scm.com/images/logos/downloads/Git-Icon-1788C.png' },
        { id: 'hvPlot', img: 'https://hvplot.holoviz.org/_static/hvplot.png' }
    ];

    const links = [
        { source: 'Python', target: 'Git' },
        { source: 'Git', target: 'hvPlot' }
    ];

    // Create SVG element
    const svg = d3.select('svg')
        .attr('width', width)
        .attr('height', height);

    // Create a force simulation
    const simulation = d3.forceSimulation(nodes)
        .force('link', d3.forceLink(links).id(d => d.id).distance(150))
        .force('charge', d3.forceManyBody().strength(-500))
        .force('center', d3.forceCenter(width / 2, height / 2));

    // Draw links (edges)
    const link = svg.append('g')
        .attr('class', 'links')
        .selectAll('line')
        .data(links)
        .enter()
        .append('line')
        .attr('class', 'link');

    // Draw nodes
    const node = svg.append('g')
        .attr('class', 'nodes')
        .selectAll('image')
        .data(nodes)
        .enter()
        .append('image')
        .attr('xlink:href', d => d.img)
        .attr('width', 60)
        .attr('height', 60)
        .attr('class', 'logo')
        .call(drag(simulation));

    // Add drag behavior
    function drag(simulation) {
        function dragStarted(event) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            event.subject.fx = event.subject.x;
            event.subject.fy = event.subject.y;
        }

        function dragged(event) {
            event.subject.fx = event.x;
            event.subject.fy = event.y;
        }

        function dragEnded(event) {
            if (!event.active) simulation.alphaTarget(0);
            event.subject.fx = null;
            event.subject.fy = null;
        }

        return d3.drag()
            .on('start', dragStarted)
            .on('drag', dragged)
            .on('end', dragEnded);
    }

    // Update positions on each tick
    simulation.on('tick', () => {
        link
            .attr('x1', d => d.source.x)
            .attr('y1', d => d.source.y)
            .attr('x2', d => d.target.x)
            .attr('y2', d => d.target.y);

        node
            .attr('x', d => d.x - 30)  // Offset by half the image size
            .attr('y', d => d.y - 30);
    });
</script>

</body>
</html>
